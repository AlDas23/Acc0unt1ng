{% extends "investBase.html" %}
{% block body %}
<script src="{{ url_for('static', filename='js_scripts/investScripts.js') }}"></script>
<h3>Add investment record</h3>
<br>
<form action="/invest/add/transaction" method="post" onsubmit="return false;">
  <table>
    <tr>
      <td><label for="type">Buy/sell</label></td>
      <td>
        <select name="type" id="type" required>
          <option value="pos" selected>Buy</option>
          <option value="neg">Sell</option>
        </select>
      </td>
    </tr>
    <tr>
      <td><label for="investmentDate">Date</label></td>
      <td><input type="date" id="date" name="investmentDate" required /></td>
    </tr>
    <tr>
      <td><label for="pb">Person-bank</label></td>
      <td><select name="pb" id="pb" required>
          <option value="none" disabled selected>None</option>
          {% for personBank in options.personBank %}
          <option value="{{ personBank }}">{{ personBank }}</option>
          {% endfor %}
        </select></td>
    </tr>
    <tr>
      <td><label for="amount">Amount</label></td>
      <td><input type="number" id="amount" name="amount" min="1" required /></td>
    </tr>
    <tr>
      <td><label for="currency">Currency</label></td>
      <td><select name="currency" id="currency" required>
          <option value="none" disabled selected>None</option>
          {% for currency in options.currency %}
          <option value="{{ currency }}">{{ currency }}</option>
          {% endfor %}
        </select></td>
    </tr>
    <tr>
      <td><label for="ipb">Invest Person-bank</label></td>
      <td><select name="ipb" id="ipb" required>
          <option value="none" disabled selected>None</option>
          {% for investPB in options.investPB %}
          <option value="{{ investPB }}">{{ investPB }}</option>
          {% endfor %}
        </select></td>
    </tr>
    <tr>
      <td><label for="stockAmount">Stock amount</label></td>
      <td><input type="number" name="stockAmount" id="stockAmount" min="0" required></td>
    </tr>
    <tr>
      <td><label for="stock">Stock</label></td>
      <td><select name="stock" id="stock" required>
          <option value="none" disabled selected>None</option>
          {% for stock in options.stock %}
          <option value="{{ stock }}">{{ stock }}</option>
          {% endfor %}
        </select></td>
    </tr>
  </table>
  <input type="button" value="Submit" onclick="validateTransactionForm()" />
</form>

<!-- History table -->
<h3>Investment history</h3>
{% if history is empty %}
<p>No investment history available.</p>
{% else %}
<table id="historyTable" class="table table-striped table-bordered table-hover table-sm">
  <thead>
    <tr>
      <th>ID</th>
      <th>Date</th>
      <th>Person-bank</th>
      <th>Amount</th>
      <th>Currency</th>
      <th>Invest Person-bank</th>
      <th>Stock amount</th>
      <th>Stock</th>
    </tr>
  </thead>
  <tbody id="historyBody">
    {% for record in history %}
    <tr>
      <td>{{ record.id }}</td>
      <td>{{ record.date }}</td>
      <td>{{ record.pb }}</td>
      <td>{{ record.amount }}</td>
      <td>{{ record.currency }}</td>
      <td>{{ record.ipbName }}</td>
      <td>{{ record.iAmount }}</td>
      <td>{{ record.stock }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endif %}
{% endblock %}